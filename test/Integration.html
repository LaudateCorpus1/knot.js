<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>QUnit basic example</title>
    <link rel="stylesheet" href="../libs/qunit.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="../libs/qunit.js"></script>
    <script src="./TestUtility.js"></script>

    <script src="../src/core/NameSpace.js"></script>

    <script src="../src/core/Utility.js"></script>
    <script src="../src/core/Deffered.js"></script>
    <script src="../src/core/AttachedData.js"></script>
    <script src="../src/core/DataMonitor.js"></script>
    <script src="../src/core/Validating.js"></script>
    <script src="../src/core/Extension.js"></script>
    <script src="../src/core/OptionParser.js"></script>
    <script src="../src/core/CBS.js"></script>
    <script src="../src/core/TemplateMgr.js"></script>
    <script src="../src/core/Knot.js"></script>



    <script type="text/cbs">
    body{
        dataContext:/testDataModel
    }
    #testTarget{
        simValue1:name,
        simValue2:sex
    }
    </script>

    <script>
        var testDataModel = {
        };

        $(document).ready(function(){
            Knot.registerKnotExtension(TestKnot, Knot.ExtensionType.Knot)
            Knot.tie();

            doTest();
        });

        function doTest(){
            QUnit.test( "Basic integration test", function( assert ) {
                var testTarget = $("#testTarget")[0];

                testDataModel.name = "Satoshi Nakamoto";
                assert.equal(TestKnot.getValue(testTarget, "simValue1"), testDataModel.name);

                //since name is not in tow-way binding, it shouldn't change the original data when binding target is changed.
                var oldName = testDataModel.name;
                TestKnot.changeValue(testTarget, "simValue1", "Alex");
                assert.equal(TestKnot.getValue(testTarget, "simValue1"), "Alex");
                assert.equal(testDataModel.name, oldName);


            });
        }

    </script>
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>

<hr style="margin-top: 50px"/>

<div>
    <div id="testTarget"></div>
</div>
</body>
</html>